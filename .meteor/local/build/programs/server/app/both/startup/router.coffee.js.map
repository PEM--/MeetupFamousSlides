{"version":3,"file":"/both/startup/router.coffee.js","sources":["router.coffee"],"names":[],"mappings":";AAAA;;IAAC,OAAD,GAAU;EACR;IAAE,MAAM,GAAR;IAAa,KAAK,OAAlB;GADQ,EAER;IAAE,MAAM,UAAR;GAFQ,EAGR;IAAE,MAAM,UAAR;GAHQ,EAIR;IAAE,MAAM,UAAR;GAJQ,EAKR;IAAE,MAAM,UAAR;GALQ,EAMR;IAAE,MAAM,UAAR;GANQ,EAOR;IAAE,MAAM,UAAR;GAPQ,EAQR;IAAE,MAAM,UAAR;GARQ,EASR;IAAE,MAAM,UAAR;GATQ,EAUR;IAAE,MAAM,UAAR;GAVQ,EAWR;IAAE,MAAM,UAAR;GAXQ,EAYR;IAAE,MAAM,UAAR;GAZQ,EAaR;IAAE,MAAM,UAAR;GAbQ,EAcR;IAAE,MAAM,UAAR;GAdQ,EAeR;IAAE,MAAM,MAAR;GAfQ;CAAV;;MAkBM,CAAC,SAAP,CAAiB;kBAAgB,QAAhB;CAAjB,CAlBA;;MAmBM,CAAC,KAAP,CAAa,MAAO,GAAE,CAAC,IAAvB,EAA6B;SAAG,IAAC,OAAD,CAAQ,MAAO,GAAE,CAAC,GAAlB,EAAH;CAA7B,CAnBA;;AAoBA;;;QAAM,CAAC,KAAP,CAAa,KAAK,CAAC,IAAnB;CApBA;;AAsBA,IAAG,MAAM,CAAC,QAAV;AAEE,QAAM,CAAC,QAAP,CAAgB,cAAhB,EAAgC,OAAhC;EAEA,MAAM,CAAC,OAAP,CAAe;AAEb,UAAM,CAAC,IAAI,CAAC,MAAM,CAAC,EAAnB,CAAsB,SAAtB,EAAiC,SAAC,MAAD;AAC/B,cAAO,MAAM,CAAC,KAAd;aAEO,EAFP;aAEW,EAFX;iBAEmB,MAAM,CAAC,OAAP,GAFnB;aAIO,EAJP;iBAIe,MAAM,CAAC,OAAP,GAJf;OAD+B;KAAjC;WAMA,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,EAAnB,CAAsB,SAAtB,EAAiC;aAAG,MAAM,CAAC,OAAP,GAAH;KAAjC,EARa;GAAf,CAFA;EAYA,MAAM,CAAC,cAAP,CAAsB;AAEpB;QAAO,sBAAP;AACE,aAAO,MAAM,CAAC,OAAP,EAAgB,CAAC,GAAxB;MACA,MAAM,CAAC,OAAP,GAAiB,CAAC,CAAC,OAAF,CAAU,MAAV,EAAkB,CAAC,CAAC,IAAF,CAAO,MAAP,EAAe,SAAC,KAAD;eAChD,KAAK,CAAC,IAAN,KAAc,KADkC;OAAf,CAAlB,CADjB,CADF;;WAIA,IAAC,KAAD,GANoB;GAAtB,CAZA;EAoBA,MAAM,CAAC,OAAP,GAAiB;AACf;iBAAa,OAAO,CAAC,GAAR,CAAY,mBAAZ,CAAb;AACA,QAAG,eAAc,kBAAd,IAAoC,eAAc,MAArD;AACE,aAAO,CAAC,GAAR,CAAY,mBAAZ,EAAiC,aAAjC,EADF;KADA;IAGA,MAAM,CAAC,OAAP,EAHA;AAIA,QAAsB,MAAM,CAAC,OAAP,KAAkB,MAAM,CAAC,MAA/C;YAAM,CAAC,OAAP,GAAiB,CAAjB;KAJA;WAKA,MAAM,CAAC,EAAP,CAAU,MAAO,OAAM,CAAC,OAAP,CAAe,CAAC,IAAjC,EANe;GApBjB;EA4BA,MAAM,CAAC,OAAP,GAAiB;AACf;iBAAa,OAAO,CAAC,GAAR,CAAY,mBAAZ,CAAb;AACA,QAAG,eAAc,aAAd,IAA+B,eAAc,MAAhD;AACE,aAAO,CAAC,GAAR,CAAY,mBAAZ,EAAiC,kBAAjC,EADF;KADA;IAGA,MAAM,CAAC,OAAP,EAHA;AAIA,QAAsC,MAAM,CAAC,OAAP,KAAkB,EAAxD;YAAM,CAAC,OAAP,GAAiB,MAAM,CAAC,MAAP,GAAgB,CAAjC;KAJA;WAKA,MAAM,CAAC,EAAP,CAAU,MAAO,OAAM,CAAC,OAAP,CAAe,CAAC,IAAjC,EANe;GA5BjB;EAoCA,MAAM,CAAC,UAAP,GAAoB;AAClB,UAAM,CAAC,GAAP,GAAa,KAAK,CAAC,IAAN,CAAW,UAAX,CAAb;AACA,QAAO,QAAO,MAAd;AACE,SAAG,CAAC,QAAQ,CAAC,YAAb,CAA2B,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,OAAtB,CAA8B,IAAI,CAAC,EAAnC,CAA3B,EACE;kBAAU,GAAV;OADF;aAEA,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,UAAvB,CAAkC;AAChC,eAAO,CAAC,GAAR,CAAY,UAAZ,EAAwB,KAAE,OAAM,CAAC,OAAP,GAAiB,CAAjB,CAAF,GAAsB,GAAtB,GAAwB,MAAM,CAAC,MAAvD;eACA,GAAG,CAAC,QAAQ,CAAC,YAAb,CAA2B,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,OAAtB,CAA8B,CAA9B,CAA3B,EACE;oBAAU,GAAV;SADF,EAFgC;OAAlC,EAIE,GAJF,EAHF;KAFkB;GApCpB;EA+CA,MAAM,CAAC,aAAP,CAAqB;WAAG,MAAM,CAAC,UAAP,GAAH;GAArB,CA/CA,CAFF;CAtBA;A","sourcesContent":["@SLIDES = [\n  { path: '/', tpl: 'title' }\n  { path: '/slide01' }\n  { path: '/slide02' }\n  { path: '/slide03' }\n  { path: '/slide04' }\n  { path: '/slide05' }\n  { path: '/slide06' }\n  { path: '/slide07' }\n  { path: '/slide08' }\n  { path: '/slide09' }\n  { path: '/slide10' }\n  { path: '/slide11' }\n  { path: '/slide12' }\n  { path: '/slide13' }\n  { path: '/end' }\n]\n\nRouter.configure layoutTemplate: 'layout'\nRouter.route SLIDES[0].path, -> @render SLIDES[0].tpl\nRouter.route slide.path for slide in _.rest SLIDES\n\nif Meteor.isClient\n  # Remove debug logging in Famous-Views\n  Logger.setLevel 'famous-views', 'error'\n\n  Meteor.startup ->\n    # Events handling for going from one slide to the other.\n    famous.core.Engine.on 'keydown', (keyEvt) ->\n      switch keyEvt.which\n        # SPACE and â†’: Go next slide\n        when 39, 32 then Router.setNext()\n        # SPACE and â†’: Go next slide\n        when 37 then Router.setPrev()\n    famous.core.Engine.on CLICK_EVT, -> Router.setNext()\n\n  Router.onBeforeAction ->\n    # Get the first index in the slidedeck when loading the app.\n    unless Router.history?\n      path = Router.current().url\n      Router.history = _.indexOf SLIDES, _.find SLIDES, (slide) ->\n        slide.path is path\n    @next()\n\n  Router.setNext = ->\n    transition = Session.get 'currentTransition'\n    if transition is 'slideWindowRight' or transition is undefined\n      Session.set 'currentTransition', 'slideWindow'\n    Router.history++\n    Router.history = 0 if Router.history is SLIDES.length\n    Router.go SLIDES[Router.history].path\n\n  Router.setPrev = ->\n    transition = Session.get 'currentTransition'\n    if transition is 'slideWindow' or transition is undefined\n      Session.set 'currentTransition', 'slideWindowRight'\n    Router.history--\n    Router.history = SLIDES.length - 1 if Router.history is -1\n    Router.go SLIDES[Router.history].path\n\n  Router.setCounter = ->\n    window.cpt = FView.byId 'slideCpt'\n    unless cpt is undefined\n      cpt.modifier.setTransform (famous.core.Transform.rotateY Math.PI),\n        duration: 300\n      famous.utilities.Timer.setTimeout ->\n        Session.set 'slideCpt', \"#{Router.history + 1}/#{SLIDES.length}\"\n        cpt.modifier.setTransform (famous.core.Transform.rotateY 0),\n          duration: 300\n      , 300\n\n  Router.onAfterAction -> Router.setCounter()\n"]}