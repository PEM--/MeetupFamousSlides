{"version":3,"file":"/packages/iron:core.js","sources":["iron:core/lib/version_conflict_error.js","iron:core/lib/iron_core.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA,mC;AACA,wB;AACA,uI;AACA,+F;AACA,sB;AACA,sE;AACA,S;AACA,wC;AACA,0C;AACA,oD;AACA,kD;AACA,O;AACA,0D;AACA,iC;AACA,yC;AACA,S;AACA,K;AACA,C;;;;;;;;;;;;;;;;;;;ACjBA,U;AACA,gB;;AAEA,G;AACA,uE;AACA,G;;AAEA,+C;AACA,iB;AACA,yB;AACA,E;;AAEA,G;AACA,oE;AACA,G;AACA,6C;AACA,iB;AACA,iD;AACA,E;;AAEA,G;AACA,8E;AACA,wE;AACA,sC;AACA,G;AACA,0D;AACA,4C;AACA,yB;AACA,iB;AACA,U;AACA,uB;AACA,G;AACA,E;;AAEA,G;AACA,yE;AACA,sC;AACA,E;AACA,0D;AACA,4D;AACA,mE;AACA,G;AACA,uD;AACA,6F;AACA,+F;;AAEA,uB;AACA,2B;AACA,2B;AACA,4C;AACA,G;;AAEA,4B;AACA,6B;AACA,I;;AAEA,4B;AACA,sC;AACA,+B;AACA,qC;;AAEA,kC;AACA,wB;AACA,qC;;AAEA,e;AACA,E;;AAEA,G;AACA,8E;AACA,iC;AACA,E;AACA,4D;AACA,mE;AACA,G;AACA,8C;AACA,sB;;AAEA,0B;AACA,6D;AACA,sB;AACA,oB;AACA,oC;AACA,qC;AACA,Q;AACA,+C;;AAEA,uC;AACA,I;;AAEA,kD;AACA,E;;AAEA,G;AACA,oD;AACA,G;AACA,kC;AACA,2C;AACA,K;;AAEA,G;AACA,sE;AACA,6B;AACA,G;AACA,oD;AACA,iC;AACA,Y;AACA,W;AACA,W;AACA,U;;AAEA,iF;;AAEA,+B;AACA,qB;AACA,e;;AAEA,0C;AACA,oB;AACA,sC;AACA,G;;AAEA,+B;AACA,sB;AACA,iB;AACA,U;AACA,qB;AACA,G;AACA,E;;AAEA,G;AACA,gF;AACA,gB;AACA,E;AACA,W;AACA,E;AACA,iB;AACA,iB;AACA,E;AACA,+B;AACA,6C;AACA,G;AACA,6C;AACA,iC;AACA,Y;AACA,U;;AAEA,wC;AACA,mC;AACA,iB;AACA,4C;AACA,0B;AACA,e;AACA,yB;AACA,K;AACA,U;AACA,sB;AACA,G;;AAEA,uD;AACA,a;AACA,E;;AAEA,G;AACA,uB;AACA,G;AACA,wC;AACA,gE;AACA,E;;AAEA,G;AACA,kC;AACA,G;AACA,uC;AACA,uB;;AAEA,W;AACA,c;;AAEA,+C;AACA,uC;AACA,c;AACA,E;;AAEA,G;AACA,kC;AACA,G;AACA,uC;AACA,yC;AACA,2E;AACA,gB;AACA,E;;AAEA,G;AACA,mE;AACA,e;AACA,E;AACA,I;AACA,iC;AACA,6B;AACA,yC;AACA,+D;AACA,I;AACA,G;AACA,+C;AACA,W;AACA,c;AACA,c;AACA,Y;AACA,wF;;AAEA,yB;AACA,qB;AACA,2B;AACA,6C;AACA,uC;AACA,U;AACA,mB;AACA,c;AACA,iB;AACA,e;AACA,G;;AAEA,uD;AACA,iB;AACA,uB;AACA,a;AACA,6B;AACA,mC;AACA,iC;AACA,W;AACA,uB;AACA,M;AACA,G;AACA,E;;AAEA,gE;AACA,sB;AACA,iC;AACA,sD;AACA,I;AACA,E;;AAEA,qB;AACA,iC;AACA,S;AACA,uB;AACA,gD;AACA,gB;AACA,mD;AACA,E;;AAEA,G;AACA,wE;AACA,W;AACA,G;AACA,uC;AACA,kF;;AAEA,sC;AACA,wD;AACA,+C;AACA,kF;AACA,K;AACA,I;AACA,E;;AAEA,E;AACA,8C;AACA,G;AACA,kD;AACA,8C;AACA,uC;AACA,uB;AACA,4B;AACA,G;AACA,a;AACA,E;;AAEA,iD;AACA,8B","sourcesContent":["if (Package['cmather:iron-core']) {\n  throw new Error(\"\\n\\n\\\n    Sorry! The cmather:iron-{x} packages were migrated to the new package system with the wrong name, and you have duplicate copies.\\n\\\n    You can see which cmather:iron-{x} packages have been installed by using this command:\\n\\n\\\n    > meteor list\\n\\n\\\n    Can you remove any installed cmather:iron-{x} packages like this:\\\n    \\n\\n\\\n    > meteor remove cmather:iron-core\\n\\\n    > meteor remove cmather:iron-router\\n\\\n    > meteor remove cmather:iron-dynamic-template\\n\\\n    > meteor remove cmather:iron-dynamic-layout\\n\\\n    \\n\\\n    The new packages are named iron:{x}. For example:\\n\\n\\\n    > meteor add iron:router\\n\\n\\\n    Sorry for the hassle, but thank you!\\\n    \\n\\n\\\n  \");\n}\n","Iron = {};\nIron.utils = {};\n\n/**\n * Assert that the given condition is truthy and throw an error if not.\n */\n\nIron.utils.assert = function (condition, msg) {\n  if (!condition)\n    throw new Error(msg);\n};\n\n/**\n * Print a warning message to the console if the console is defined.\n */\nIron.utils.warn = function (condition, msg) {\n  if (!condition)\n    console && console.warn && console.warn(msg);\n};\n\n/**\n * Given a target object and a property name, if the value of that property is\n * undefined, set a default value and return it. If the value is already\n * defined, return the existing value.\n */\nIron.utils.defaultValue = function (target, prop, value) {\n  if (typeof target[prop] === 'undefined') {\n    target[prop] = value;\n    return value;\n  } else {\n    return target[prop]\n  }\n};\n\n/**\n * Make one constructor function inherit from another. Optionally provide\n * prototype properties for the child.\n *\n * @param {Function} Child The child constructor function.\n * @param {Function} Parent The parent constructor function.\n * @param {Object} [props] Prototype properties to add to the child\n */\nIron.utils.inherits = function (Child, Parent, props) {\n  Iron.utils.assert(typeof Child !== \"undefined\", \"Child is undefined in inherits function\");\n  Iron.utils.assert(typeof Parent !== \"undefined\", \"Parent is undefined in inherits function\");\n\n  // copy static fields\n  for (var key in Parent) {\n    if (_.has(Parent, key))\n      Child[key] = EJSON.clone(Parent[key]);\n  }\n\n  var Middle = function () {\n    this.constructor = Child;\n  };\n\n  // hook up the proto chain\n  Middle.prototype = Parent.prototype;\n  Child.prototype = new Middle;\n  Child.__super__ = Parent.prototype;\n\n  // copy over the prototype props\n  if (_.isObject(props))\n    _.extend(Child.prototype, props);\n\n  return Child;\n};\n\n/**\n * Create a new constructor function that inherits from Parent and copy in the\n * provided prototype properties.\n *\n * @param {Function} Parent The parent constructor function.\n * @param {Object} [props] Prototype properties to add to the child\n */\nIron.utils.extend = function (Parent, props) {\n  props = props || {};\n\n  var ctor = function () {\n    // automatically call the parent constructor if a new one\n    // isn't provided.\n    var constructor;\n    if (_.has(props, 'constructor'))\n      constructor = props.constructor\n    else\n      constructor = ctor.__super__.constructor;\n\n    constructor.apply(this, arguments);\n  };\n\n  return Iron.utils.inherits(ctor, Parent, props);\n};\n\n/**\n * Either window in the browser or global in NodeJS.\n */\nIron.utils.global = (function () {\n  return Meteor.isClient ? window : global;\n})();\n\n/**\n * Ensure a given namespace exists and assign it to the given value or\n * return the existing value.\n */\nIron.utils.namespace = function (namespace, value) {\n  var global = Iron.utils.global;\n  var parts;\n  var part;\n  var name;\n  var ptr;\n\n  Iron.utils.assert(typeof namespace === 'string', \"namespace must be a string\");\n\n  parts = namespace.split('.');\n  name = parts.pop();\n  ptr = global;\n\n  for (var i = 0; i < parts.length; i++) {\n    part = parts[i];\n    ptr = ptr[part] = ptr[part] || {};\n  }\n\n  if (arguments.length === 2) {\n    ptr[name] = value;\n    return value;\n  } else {\n    return ptr[name];\n  }\n};\n\n/**\n * Returns the resolved value at the given namespace or the value itself if it's\n * not a string.\n *\n * Example:\n *\n * var Iron = {};\n * Iron.foo = {};\n *\n * var baz = Iron.foo.baz = {};\n * Iron.utils.resolve(\"Iron.foo.baz\") === baz\n */\nIron.utils.resolve = function (nameOrValue) {\n  var global = Iron.utils.global;\n  var parts;\n  var ptr;\n\n  if (typeof nameOrValue === 'string') {\n    parts = nameOrValue.split('.');\n    ptr = global;\n    for (var i = 0; i < parts.length; i++) {\n      ptr = ptr[parts[i]];\n      if (!ptr)\n        return undefined;\n    }\n  } else {\n    ptr = nameOrValue;\n  }\n\n  // final position of ptr should be the resolved value\n  return ptr;\n};\n\n/**\n * Capitalize a string.\n */\nIron.utils.capitalize = function (str) {\n  return str.charAt(0).toUpperCase() + str.slice(1, str.length);\n};\n\n/**\n * Convert a string to class case.\n */\nIron.utils.classCase = function (str) {\n  var re = /_|-|\\.|\\//;\n\n  if (!str)\n    return '';\n\n  return _.map(str.split(re), function (word) {\n    return Iron.utils.capitalize(word);\n  }).join('');\n};\n\n/**\n * Convert a string to camel case.\n */\nIron.utils.camelCase = function (str) {\n  var output = Iron.utils.classCase(str);\n  output = output.charAt(0).toLowerCase() + output.slice(1, output.length);\n  return output;\n};\n\n/**\n * deprecatation notice to the user which can be a string or object\n * of the form:\n *\n * {\n *  name: 'somePropertyOrMethod',\n *  where: 'RouteController',\n *  instead: 'someOtherPropertyOrMethod',\n *  message: ':name is deprecated. Please use :instead instead'\n * }\n */\nIron.utils.notifyDeprecated = function (info) {\n  var name;\n  var instead;\n  var message;\n  var where;\n  var defaultMessage = \"[:where] ':name' is deprecated. Please use ':instead' instead.\";\n\n  if (_.isObject(info)) {\n    name = info.name;\n    instead = info.instead;\n    message = info.message || defaultMessage;\n    where = info.where || 'IronRouter';\n  } else {\n    message = info;\n    name = '';\n    instead = '';\n    where = '';\n  }\n\n  if (typeof console !== 'undefined' && console.warn) {\n    console.warn(\n      '<deprecated> ' +\n      message\n      .replace(':name', name)\n      .replace(':instead', instead)\n      .replace(':where', where) +\n      ' ' +\n      (new Error).stack\n    );\n  }\n};\n\nIron.utils.withDeprecatedNotice = function (info, fn, thisArg) {\n  return function () {\n    Utils.notifyDeprecated(info);\n    return fn && fn.apply(thisArg || this, arguments);\n  };\n};\n\n// so we can do this:\n//   getController: function () {\n//    ...\n//   }.deprecate({...})\nFunction.prototype.deprecate = function (info) {\n  var fn = this;\n  return Iron.utils.withDeprecatedNotice(info, fn);\n};\n\n/**\n * Returns a function that can be used to log debug messages for a given\n * package.\n */\nIron.utils.debug = function (package) {\n  Iron.utils.assert(typeof package === 'string', \"debug requires a package name\");\n\n  return function debug (/* args */) {\n    if (console && console.log && Iron.debug === true) {\n      var msg = _.toArray(arguments).join(' ');\n      console.log(\"%c<\" + package + \"> %c\" + msg, \"color: #999;\", \"color: #000;\");\n    }\n  };\n};\n\n/*\n * Meteor's version of this function is broke.\n */\nIron.utils.get = function (obj /*, arguments */) {\n  for (var i = 1; i < arguments.length; i++) {\n    if (!obj || !(arguments[i] in obj))\n      return undefined;\n    obj = obj[arguments[i]];\n  }\n  return obj;\n};\n\n// make sure Iron ends up in the global namespace\nIron.utils.global.Iron = Iron;\n"]}